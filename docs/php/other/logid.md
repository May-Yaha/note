
```
$arr = gettimeofday();
$logId = ($arr['sec']*100000 + $arr['usec']/10) & 0x7FFFFFFF;
define('LOG_ID', $logId);
```

1. 先使用`gettimeofday();`方法取得了秒值和微秒值，然后使用

`$arr['sec']*100000 + $arr['usec']/10`

相当于将一个秒值和微秒值连成一个有5位数字长的整数。
2. 将这个很大的值与这个十六进制数据：0x7FFFFFFF 进行按位与运算，得出一个整数。

`($arr['sec']*100000 + $arr['usec']/10) & 0x7FFFFFFF;`

本意是将前面得到的超大数值与后面的数组进行位运算，但因为前面的数值远远大于int的最大值，故在进行位运算时会被转化为其对int最大值2147483647的取模值。而0x7FFFFFFF本身就是最大的int值，其与前面的结果进行位运算并不改变前面的值。只是加上了这个位运算会强迫前面的值进行取模运算。故上面的方法实际可改写为：

`$logId = ((microtime(true) * 100000) & 0x7FFFFFFF);`

甚至写得再简单一点，直接写成下面这句就更好理解了：

`$logId = ((microtime(true) * 100000) % 2147483647);`