# 写在前面

之前一直觉得计算机网络很枯燥，当做过一些项目加上重构之后，再来看计算机网络，网络的一些思想真的很厉害，比如ip的子网划分可以应用在业务的树形结构数据上等等这样。自己也是从一个url触发之后经历了那些事，来看的，收货蛮多，但是这本书比较耗时间，所以整理了一个笔记，可以直接看重点。有兴趣的可以对应章节翻翻，收益颇深。

# 计算机网络概念

# 1 概念

- TCP/IP是一个实现Internet体系结构的协议族，它来源于**ARPANET**参考模型（ARM）[RFC0871]
- TCP/IP体系结构来源于实际工作用于满足多种不同的分组交换计算机网络的需求
 
## 1.1 体系结构原则

### 1.1.1 Clark

Clark描述首要目标是“发展一种重复利用已有的互联网络技术”

### 1.1.2 Clark目标

- Internet体系应将多种网络互连起来
- Internet在互连的网络上同时运行多个应用
- Internet通信在网络或网关失效时必须能持续
- Internet必须支持多种类型的通信服务
- Internet体系结构必须兼容多种网络
- Internet体系结构必须允许对其资源的分布式管理
- Internet体系结构必须是经济有效的
- Internet体系结构必须允许低能力主机的连接
- Internet中使用的资源必须是可统计的

### 1.1.3 连接

网络的概念主要是基于电话网络，一次通话要在通信双方建立一条连接（线路），当通话结束被释放。

连接建立后会分配一定数量的**带宽**和**容量**。

### 1.1.4 分组

20世纪60年代提出，在分组交换中，包含一定字节数的数字信息“快”（分组）独立通过网络传输。当交换机接收到分组之后，存入缓存或队列中，通过先到达先服务的方式处理。

来自不同源或发送方的块可以组合，也可以再分解，被称为**[多路复用](https://zh.wikipedia.org/wiki/%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8)**

优点：
- 网络更有弹性
- 基于统计复用可更好的利用网络链路和交换设备

### 1.1.5 数据报

20世纪60年代后期，数据报开始发展，其起源于CYCLADES[P73]系统。它是一个特定类型分组，有关来源和最终目的地的所有识别信息都位于分组中，不需要在交换机中维护链接状态，用户建立无连接的网络

### 1.1.6 端到端论点

### 1.1.7 命运共享

### 1.1.8 差错控制

### 1.1.9 流量控制

---

## 1.2 设计和实现

### 1.2.1 分层

N层会对N+1层提供服务，每层只负责通信的一个方向

分层主要优点：具有协议复用能力，复用可以发生在不同层，并在每层有不同类型的标识符，用于确定协议或信息流

- OSI（开放系统互联标准）7层模型
    - 应用层：提供为应用软件而设的接口，以设置与另一应用软件之间的通信。例如: HTTP、HTTPS、FTP、TELNET、SSH、SMTP、POP3、HTML等
    - 表示层：把数据转换为能与接收者的系统格式兼容并适合传输的格式
    - 会话层：负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接
    - 传输层：把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息
    - 网络层：决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组，网络表头包含了网络数据
    - 链路层：负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成帧。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等
    - 物理层：管理计算机通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机接口卡等
- TCP/IP 5层模型
    - 应用层
    - 传输层
    - 网络层
    - 链路层
    - 物理层

![TCP/IP五层模型](img/tcp-ip.jpeg)

### 1.2.2 实现与复用

每一层都有自己的消息对象（PDU），每层将来自上层的数据看成不透明、无需解释的信息

复用可以在不同层，每层有不同的类型标识，用于确定信息协议或信息流

![数据封装过程](img/data.jpg)